{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Introduction","text":"<p>The work in this repository is part of a grant approved by the \u00e6ternity crypto foundation.</p>"},{"location":"#status-quo","title":"Status Quo","text":"<ul> <li>No batch actions (updates, transfers) for AENS names are possible</li> <li>No trading of AENS names possible</li> <li>Users still suffer from name expiration as they fail to consistently track name expiration</li> </ul>"},{"location":"#outlook","title":"Outlook","text":"<p>Wrapping AENS names into NFTs will make it easy to perform batch-actions on the names and enable new use cases. NFT trading is also highly anticipated and is another topic to tackle in that regards.</p> <p>The results of the work in this grant will:</p> <ul> <li>provide a way for the community to better manage their AENS names</li> <li>enable batch-actions for AENS names</li> <li>allow strangers to extend AENS names and get rewarded for that</li> </ul>"},{"location":"contract-interface/","title":"Contract Interface","text":""},{"location":"contract-interface/#aex-141","title":"AEX-141","text":"<pre><code>contract interface IAEX141 =\ndatatype metadata_type = URL | OBJECT_ID | MAP\ndatatype metadata = MetadataIdentifier(string) | MetadataMap(map(string, string))\n\nrecord meta_info = { name: string\n, symbol: string\n, base_url: option(string)\n, metadata_type : metadata_type }\n\ndatatype event\n= Transfer(address, address, int)\n| Approval(address, address, int, string)\n| ApprovalForAll(address, address, string)\n// extension \"mintable\"\n| Mint(address, int)\n// extension \"burnable\"\n| Burn(address, int)\n\nentrypoint aex141_extensions : () =&gt; list(string)\nentrypoint meta_info : () =&gt; meta_info\nentrypoint metadata : (int) =&gt; option(metadata)\nentrypoint total_supply : () =&gt; int\nentrypoint balance : (address) =&gt; option(int)\nentrypoint owner : (int) =&gt; option(address)  stateful entrypoint transfer : (address, int, option(string)) =&gt; unit\nstateful entrypoint transfer_to_contract : (int) =&gt; unit\nstateful entrypoint approve : (address, int, bool) =&gt; unit\nstateful entrypoint approve_all : (address, bool) =&gt; unit\nentrypoint get_approved : (int) =&gt; option(address)\nentrypoint is_approved : (int, address) =&gt; bool\nentrypoint is_approved_for_all : (address, address) =&gt; bool\n\n// extension \"mintable\"\nstateful entrypoint mint : (address, option(metadata), option(string)) =&gt; int\n\n// extension \"burnable\"\nstateful entrypoint burn : (int) =&gt; unit\n</code></pre>"},{"location":"contract-interface/#aens-wrapping","title":"AENS Wrapping","text":"<pre><code>contract interface IAENSWrapping : IAEX141 =\n\nrecord config = { reward: int\n, reward_block_window: int\n, emergency_reward: int\n, emergency_reward_block_window : int\n, can_receive_from_others : bool }\n\n/// @notice wraps AENS names into a fresh minted NFT, adds NFT metadata, extends all names\n/// @param names_delegation_sigs a map (key = AENS name, value = delegation signature)\n/// @return the NFT id\nstateful entrypoint wrapAndMint : (map(string, signature)) =&gt; int\n\n/// @notice wraps a single AENS name into an existing NFT, adds NFT metadata, extends all names\n/// @param nft_id the id of the NFT to wrap the AENS name into\n/// @param name the AENS name to wrap\n/// @param delegation_sig the delegation signature for the name\nstateful entrypoint wrapSingle : (int, string, signature) =&gt; unit\n\n/// @notice wraps multiple AENS names into an existing NFT, adds NFT metadata, extends all names\n/// @param nft_id the id of the NFT to wrap the AENS name into\n/// @param names_delegation_sigs a map (key = AENS name, value = delegation signature)\nstateful entrypoint wrapMultiple : (int, map(string, signature)) =&gt; unit\n\n/// @notice adds / replaces a pointer of the AENS name while keeping existing pointers\n/// @param nft_id the id of the NFT where the AENS name is wrapped into\n/// @param name the AENS name where the pointer will be added / replaced\n/// @param pointer_key the key of the pointer\n/// @param pointer_value the object to point to (account, channel, contract, oracle)\nstateful entrypoint addPointer : (int, string, string, pointee) =&gt; unit\n\n/// @notice adds / replaces a set of pointers of the AENS name\n/// @param nft_id the id of the NFT where the AENS name is wrapped into\n/// @param name the AENS name where the pointer will be added / replaced\n/// @param pointers a map of pointers to set\n/// @param keep_existing a bool indicating whether to keep existing pointers or not\nstateful entrypoint addPointers : (int, string, map(string, pointee), bool) =&gt; unit\n\n/// @notice removes a pointer of the AENS name\n/// @param nft_id the id of the NFT where the AENS name is wrapped into\n/// @param name the AENS name where the pointer will be removed\n/// @param pointer_key the key of the pointer\nstateful entrypoint removePointer : (int, string, string) =&gt; unit\n\n/// @notice removes multiple pointers of the AENS name\n/// @param nft_id the id of the NFT where the AENS name is wrapped into\n/// @param name the AENS name where the pointers will be removed\n/// @param pointer_keys a set of pointer keys\nstateful entrypoint removePointers : (int, string, Set.set(string)) =&gt; unit\n\n/// @notice removes all pointers of the AENS name\n/// @param nft_id the id of the NFT where the AENS name is wrapped into\n/// @param name the AENS name where the pointers will be removed\nstateful entrypoint removeAllPointers : (int, string) =&gt; unit\n\n/// @notice revokes a single AENS name wrapped in the NFT, removes metadata\n/// @param nft_id the id of the NFT where the AENS name is wrapped into\n/// @param name the AENS name to revoke\nstateful entrypoint revokeSingle : (int, string) =&gt; unit\n\n/// @notice revokes multiple AENS names wrapped in the NFT, removes metadata\n/// @param nft_id the id of the NFT where the AENS name is wrapped into\n/// @param names the AENS names to revoke\nstateful entrypoint revokeMultiple : (int, Set.set(string)) =&gt; unit\n\n/// @notice revokes all AENS names wrapped in the NFT, removes metadata and burns the NFT\n/// @param nft_id the id of the NFT where the AENS name is wrapped into\nstateful entrypoint revokeAll : (int) =&gt; unit\n\n/// @notice transfers a single AENS name to another NFT by updating metadata of both NFTs, extends all names wrapped in new NFT\n/// @param nft_id_old the id of the NFT that currently wraps the AENS name\n/// @param nft_id_new the id of the NFT that will wrap the AENS name in the future\n/// @param name the AENS name to transfer\nstateful entrypoint transferSingle : (int, int, string) =&gt; unit\n\n/// @notice transfers multiple AENS names to another NFT by updating metadata of both NFTs, extends all names wrapped in new NFT\n/// @param nft_id_old the id of the NFT that currently wraps the AENS name\n/// @param nft_id_new the id of the NFT that will wrap the AENS name in the future\n/// @param names the AENS names to transfer\nstateful entrypoint transferMultiple : (int, int, Set.set(string)) =&gt; unit\n\n/// @notice transfers a single AENS name to another NFT by updating metadata of both NFTs, extends all names wrapped in new NFT, burns the old NFT\n/// @param nft_id_old the id of the NFT that currently wraps the AENS name\n/// @param nft_id_new the id of the NFT that will wrap the AENS name in the future\nstateful entrypoint transferAll : (int, int) =&gt; unit\n\n/// @notice claims the transfer of a single AENS name to another NFT, requires the current owner to provide the delegation signature off-chain to the owner of the target NFT\n/// @param nft_id_old the id of the NFT that currently wraps the AENS name\n/// @param nft_id_new the id of the NFT that will wrap the AENS name in the future\n/// @param name the AENS name to transfer\n/// @param delegation_sig the delegation signature for the name provided by the owner of nft_id_old\nstateful entrypoint claimSingleTransfer : (int, int, string, signature) =&gt; unit\n\n/// @notice claims the transfer of a single AENS name to another NFT, requires the current owner to provide the delegation signatures off-chain to the owner of the target NFT\n/// @param nft_id_old the id of the NFT that currently wraps the AENS name\n/// @param nft_id_new the id of the NFT that will wrap the AENS name in the future\n/// @param names_delegation_sigs a map (key = AENS name, value = delegation signature)\nstateful entrypoint claimMultipleTransfer : (int, int, map(string, signature)) =&gt; unit\n\n/// @notice transfers the AENS name back to the owner or to another defined recipient, updates metadata\n/// @param nft_id the id of the NFT that currently wraps the AENS name\n/// @param name the AENS name to transfer\n/// @param recipient the address that should receive the AENS name\nstateful entrypoint unwrapSingle : (int, string, option(address)) =&gt; unit\n\n/// @notice transfers the AENS names back to the owner or to another defined recipient, updates metadata\n/// @param nft_id the id of the NFT that currently wraps the AENS name\n/// @param names the AENS names to transfer\n/// @param recipient the address that should receive the AENS name\nstateful entrypoint unwrapMultiple : (int, Set.set(string), option(address)) =&gt; unit\n\n/// @notice transfers all AENS names back to the owner or to another defined recipient, updates metadata, burns the NFT\n/// @param nft_id the id of the NFT that currently wraps the AENS name\n/// @param recipient the address that should receive the AENS name\nstateful entrypoint unwrapAll : (int, option(address)) =&gt; unit\n\n/// @notice caller sets global config for NFTs owned by the caller\n/// @param config the global config\nstateful entrypoint setGlobalConfig : (config) =&gt; unit\n\n/// @notice caller removes global config for NFTs owned by the caller\nstateful entrypoint removeGlobalConfig : () =&gt; unit\n\n/// @notice caller sets NFT specific config\n/// @param nft_id the id of the NFT to set the config\n/// @param config the nft specific config\nstateful entrypoint setNftConfig : (int, config) =&gt; unit\n\n/// @notice caller removes NFT specific config\n/// @param nft_id the id of the NFT to remove the config from\nstateful entrypoint removeNftConfig : (int) =&gt; unit\n\n/// @notice caller deposits AE to his reward pool\nstateful entrypoint depositToRewardPool : () =&gt; unit\n\n/// @notice caller withdraws all AE or a specific amount from his reward pool\n/// @param amount the optional amount of AE to withdraw\nstateful entrypoint withdrawFromRewardPool : (option(int)) =&gt; unit\n\n/// @notice calculates the reward based on the expiration date of the names wrapped in an NFT, considering the global config (or the NFT specific config if set) and the amount of \u00c6 deposited by the NFT owner\n/// @param nft_id the id of the NFT to extend\n/// @return the estimated reward\nentrypoint estimateReward : (int) =&gt; int\n\n/// @notice extends all AENS names wrapped in the NFT without getting a reward\n/// @param nft_id the id of the NFT that wraps the AENS names to extend\nstateful entrypoint extendAll : (int) =&gt; unit\n\n/// @notice extends all AENS names wrapped in the NFT and distributes a reward to the caller\n/// @param nft_id the id of the NFT that wraps the AENS names to extend\nstateful entrypoint extendAllForReward : (int) =&gt; unit\n\n/// @notice transfers a set of NFTs to the desired recipient\n/// @param recipient the address to become new owner of the NFTs\n/// @param nft_ids the ids of the NFTs to transfer\nstateful entrypoint transferMultiple : (address, Set.set(int)) =&gt; unit\n\n/// @notice burns a set of NFTs (only possible if AENS names are expired)\n/// @param nft_ids the ids of the NFTs to burn\nstateful entrypoint burnMultiple : (Set.set(int)) =&gt; unit\n</code></pre>"},{"location":"ideation-mindmap/","title":"Ideation Mindmap","text":""},{"location":"sponsors/","title":"Sponsors","text":"<p>This work is sponsored by the \u00e6ternity crypto foundation.</p> <p>Do you also wanna sponsor this work? Send some \u00c6 coins to:</p> <ul> <li><code>buymeacoffee.chain</code> or</li> <li><code>ak_3mw4DAv1mbo8XbEjTgt8UgWTgGJoNmiRnvCywz4BD6192kHtm</code></li> </ul>"},{"location":"diagrams/burn_nfts/","title":"Explicit Burn of NFTs","text":"<p>Note:</p> <ul> <li>Burning NFTs is only possible if the wrapped AENS names are expired OR if the NFT is empty, meaning it does not wrap an AENS name</li> <li>The burn entrypoint is part of the AEX-141 standard and can be called by any user</li> </ul>"},{"location":"diagrams/burn_nfts/#single","title":"Single","text":"<pre><code>sequenceDiagram\n    actor Any user\n    Any user -&gt;&gt; NFT Contract: 1) burn: nft_id\n    Note left of NFT Contract: default burn entrypoint of AEX-141\n    Note left of NFT Contract: removes all data associated with the NFT\n    Note left of NFT Contract: burns the NFT</code></pre>"},{"location":"diagrams/burn_nfts/#multiple","title":"Multiple","text":"<pre><code>sequenceDiagram\n    actor Any user\n    Any user -&gt;&gt; NFT Contract: 1) burnMultiple: Set(nft_id)\n    Note left of NFT Contract: removes all data associated with the NFTs\n    Note left of NFT Contract: burns the NFTs</code></pre>"},{"location":"diagrams/extend_aens_names/","title":"Extend AENS names","text":""},{"location":"diagrams/extend_aens_names/#for-free","title":"For free","text":"<pre><code>sequenceDiagram\n    actor Any user\n    Any user -&gt;&gt; NFT Contract: 1) extendAll: nft_id\n    Note left of NFT Contract: extends all wrapped AENS names of the given NFT</code></pre>"},{"location":"diagrams/extend_aens_names/#for-reward","title":"For reward","text":"<pre><code>sequenceDiagram\n    actor Any user\n    Any user -&gt;&gt; NFT Contract: 1) extendAllForReward: nft_id\n    Note left of NFT Contract: extends all wrapped AENS names of the given NFT\n    NFT Contract --&gt;&gt; Any user: 2) send AE\n    Note left of NFT Contract: use amount of reward specified by NFT owner</code></pre>"},{"location":"diagrams/full-example-sequence/","title":"Full example sequence","text":"<pre><code>sequenceDiagram\n    actor AENS / NFT owner\n\n    AENS / NFT owner -&gt;&gt; NFT Contract: 1) wrapAndMint\n    Note left of NFT Contract: claims ownership of names&lt;br /&gt;mints NFT with id 1&lt;br /&gt;assigns names to NFT&lt;br /&gt;extends all AENS names\n    NFT Contract --&gt;&gt; AENS / NFT owner: assign ownership of NFT with id 1\n\n    actor User XY\n\n    User XY -&gt;&gt; NFT Contract: 2) extendAll: nft_id (1)\n    Note right of NFT Contract: extends all AENS names wrapped in the given NFT&lt;br /&gt; user does not get any reward\n\n    AENS / NFT owner -&gt;&gt; NFT Contract: 3) setGlobalConfig: config\n    Note left of NFT Contract: can enable global rewards for extending names&lt;br /&gt;in NFTs owned by the caller according to the config&lt;br /&gt;reward = 50 \u00c6&lt;br /&gt;block_window = 480&lt;br /&gt;emergency_reward = 100 \u00c6&lt;br /&gt;emergency_block_window = 10&lt;br /&gt;can_receive_from_others = false\n\n    AENS / NFT owner -&gt;&gt; NFT Contract: 4) depositToRewardPool\n    AENS / NFT owner --&gt;&gt; NFT Contract: 500 \u00c6\n    Note left of NFT Contract: adds 500 \u00c6 to reward pool of NFT owner\n\n    User XY -&gt;&gt; NFT Contract: 5) extendAll: nft_id (1)\n    Note right of NFT Contract: extends all AENS names wrapped in the given NFT&lt;br /&gt; user does not get any reward&lt;br /&gt; can be called anytime\n\n    User XY -&gt;&gt; NFT Contract: 6) extendAllForReward: nft_id (1)\n    NFT Contract --&gt;&gt; User XY: 50 \u00c6\n    Note right of NFT Contract: extends all AENS names wrapped in the given NFT&lt;br /&gt; can only be called 480 blocks before the names expire\n    Note right of NFT Contract: deducts 50 \u00c6 from reward pool of NFT owner&lt;br /&gt;new value: 450 \u00c6\n\n    AENS / NFT owner -&gt;&gt; NFT Contract: 7) wrapAndMint\n    Note left of NFT Contract: claims ownership of names&lt;br /&gt;mints NFT with id 2&lt;br /&gt;assigns names to NFT&lt;br /&gt;extends all AENS names\n    NFT Contract --&gt;&gt; AENS / NFT owner: assign ownership of NFT with id 2\n\n    AENS / NFT owner -&gt;&gt; NFT Contract: 8) setNftConfig: nft_id (2), config\n    Note left of NFT Contract: provide NFT specific reward_config&lt;br /&gt;reward = 350 \u00c6&lt;br /&gt;block_window = 2400&lt;br /&gt;emergency_reward = 500 \u00c6&lt;br /&gt;emergency_block_window = 480&lt;br /&gt;can_receive_from_others = false\n\n    User XY -&gt;&gt; NFT Contract: 9) extendAllForReward: nft_id (2)\n    NFT Contract --&gt;&gt; User XY: 450 \u00c6\n    Note right of NFT Contract: emergency reward within the 480 block before expiration\n    Note right of NFT Contract: deducts 450 \u00c6 from reward pool of NFT owner&lt;br /&gt;new value: 0 \u00c6\n    Note right of NFT Contract: normally 500 \u00c6 would have been paid, but only 450 were \n\n    AENS / NFT owner -&gt;&gt; NFT Contract: 10) transferSingle: nft_id_old (1), nft_id_new (2), name\n    Note left of NFT Contract: associates provided name to nft with id 2&lt;br /&gt;updates expiry of transferred name to match expiry of names in NFT with id 2\n\n    AENS / NFT owner -&gt;&gt; NFT Contract: 11) updatePointer: nft_id, name, pointer_key, pointer_object\n    Note left of NFT Contract: adds (or replaces) pointer for specific name wrapped in NFT\n\n    AENS / NFT owner -&gt;&gt; NFT Contract: 12) unwrapAll: nft_id (1), none\n    NFT Contract --&gt;&gt; AENS / NFT owner: transfer of all AENS names wrapped in NFT with id 1\n    Note left of NFT Contract: burns the NFT with id 1\n\n    AENS / NFT owner -&gt;&gt; NFT Contract: 13) unwrapAll: nft_id (2), user xy\n    NFT Contract --&gt;&gt; User XY: transfer of all AENS names wrapped in NFT with id 2\n    Note left of NFT Contract: burns the NFT with id 2</code></pre>"},{"location":"diagrams/revoke_aens_names/","title":"Revoke AENS names","text":""},{"location":"diagrams/revoke_aens_names/#single-name","title":"Single name","text":"<pre><code>sequenceDiagram\n    actor NFT owner\n    NFT owner -&gt;&gt; NFT Contract: 1) revokeSingle: nft_id, name\n    Note left of NFT Contract: revokes AENS name wrapped in the NFT\n    Note left of NFT Contract: removes association of name to NFT</code></pre> <p>Considerations</p> <ul> <li>How to reward users for extending?</li> </ul>"},{"location":"diagrams/revoke_aens_names/#multiple-names","title":"Multiple names","text":"<pre><code>sequenceDiagram\n    actor NFT owner\n    NFT owner -&gt;&gt; NFT Contract: 1) revokeMultiple: nft_id, Set(names)\n    Note left of NFT Contract: revokes AENS names wrapped in the NFT\n    Note left of NFT Contract: removes association of names to NFT</code></pre> <p>Considerations</p> <ul> <li>How to reward users for extending?</li> </ul>"},{"location":"diagrams/revoke_aens_names/#all-names","title":"All names","text":"<pre><code>sequenceDiagram\n    actor NFT owner\n    NFT owner -&gt;&gt; NFT Contract: 1) revokeAll: nft_id\n    Note left of NFT Contract: revokes AENS names wrapped in the NFT\n    Note left of NFT Contract: burns the NFT and removes all data associated to it</code></pre>"},{"location":"diagrams/reward_users/","title":"Reward users for extending names","text":"<p>By default, rewarding users for extending names wrapped in NFTs will not be activated.</p> <p>For rewarding, we distinguish between a global reward config and an NFT specific reward config. This allows users to provide higher rewards for specific NFTs that contain AENS names which they consider more valuable than others and vice versa.</p> <p>The global reward-config is defined by an account and will be applied on all NFTs this account owns.</p> <p>NFT specific reward-config always overrules the global reward-config.</p> <p>When an NFT is transferred to another account, the NFT specific reward-config will be removed.</p>"},{"location":"diagrams/reward_users/#config","title":"Config","text":"<ul> <li><code>reward</code> the amount of \u00c6 (in \u00e6ttos) to be distributed, if a user extends names wrapped in an NFT in the regular <code>block_window</code></li> <li><code>block_window</code> the window (in keyblocks) before name expiration where the defined <code>reward</code> is paid</li> <li><code>emergency_reward</code> the amount of \u00c6 (in \u00e6ttos) to be distributed, if a user extends names wrapped in an NFT in the <code>emergency_block_window</code></li> <li><code>emergency_block_window</code> the window (in keyblocks) before name expiration where the defined <code>emergency_reward</code> is paid</li> <li><code>can_receive_from_others</code> defines if a users allows his NFTs to receive and wrap AENS names from others</li> </ul> <p>Note</p> <ul> <li><code>option(estimated_reward)</code> will be calculated based on the expiration date of the names wrapped in an NFT, considering the global config (or the NFT specific config if set) and the amount of \u00c6 deposited by the NFT owner</li> <li>in case the deposited \u00c6 amount of the NFT owner is lower than <code>reward</code> or <code>emergency_reward</code>, the remaining \u00c6 are returned</li> </ul>"},{"location":"diagrams/reward_users/#set-global-reward-config","title":"Set global reward config","text":"<pre><code>sequenceDiagram\n    actor Any user\n    Any user -&gt;&gt; NFT Contract: 1) setGlobalConfig: reward_config\n    Note left of NFT Contract: activates rewarding based on provided config</code></pre>"},{"location":"diagrams/reward_users/#remove-global-reward-config","title":"Remove global reward config","text":"<pre><code>sequenceDiagram\n    actor Any user\n    Any user -&gt;&gt; NFT Contract: 1) removeGlobalConfig\n    Note left of NFT Contract: deactivates rewarding by removing the config</code></pre>"},{"location":"diagrams/reward_users/#set-nft-specific-reward-config","title":"Set NFT specific reward config","text":"<pre><code>sequenceDiagram\n    actor NFT owner\n    NFT owner -&gt;&gt; NFT Contract: 1) setNftConfig: nft_id, reward_config\n    Note left of NFT Contract: activates NFT specific config</code></pre>"},{"location":"diagrams/reward_users/#remove-nft-specific-reward-config","title":"Remove NFT specific reward config","text":"<pre><code>sequenceDiagram\n    actor NFT owner\n    NFT owner -&gt;&gt; NFT Contract: 1) removeNftConfig: nft_id\n    Note left of NFT Contract: deactivates NFT specific config</code></pre>"},{"location":"diagrams/reward_users/#deposit-to-reward-pool","title":"Deposit to reward pool","text":"<pre><code>sequenceDiagram\n    actor Any user\n    Any user -&gt;&gt; NFT Contract: 1) depositToRewardPool\n    Note left of NFT Contract: adds the amount of \u00e6ttos sent to the reward pool of an account</code></pre>"},{"location":"diagrams/reward_users/#withdraw-reward-balance","title":"Withdraw reward balance","text":"<pre><code>sequenceDiagram\n    actor Any user\n    Any user -&gt;&gt; NFT Contract: 1) withdrawFromRewardPool: option(amount)\n    Note left of NFT Contract: removes the provided amount (\u00e6ttios) from the reward pool of an account\n    Note left of NFT Contract: if no amount is provided, the complete balance in reward pool will be withdrawn</code></pre>"},{"location":"diagrams/transfer_aens_names/","title":"Transfer AENS names","text":""},{"location":"diagrams/transfer_aens_names/#single-name","title":"Single name","text":"<pre><code>sequenceDiagram\n    actor NFT owner\n    NFT owner -&gt;&gt; NFT Contract: 1) transferSingle: nft_id_old, nft_id_new, name\n    Note left of NFT Contract: requires caller to be owner of both NFTs\n    Note left of NFT Contract: changes association of name from one NFT to another NFT\n    Note left of NFT Contract: updates expiry of transferred name to match expiry of names in nft_id_new</code></pre>"},{"location":"diagrams/transfer_aens_names/#multiple-names","title":"Multiple names","text":"<pre><code>sequenceDiagram\n    actor NFT owner\n    NFT owner -&gt;&gt; NFT Contract: 1) transferMultiple: nft_id_old, nft_id_new, Set(names)\n    Note left of NFT Contract: requires caller to be owner of both NFTs\n    Note left of NFT Contract: changes association of names from one NFT to another NFT\n    Note left of NFT Contract: updates expiry of transferred names to match expiry of names in nft_id_new</code></pre>"},{"location":"diagrams/transfer_aens_names/#all-names","title":"All names","text":"<pre><code>sequenceDiagram\n    actor NFT owner\n    NFT owner -&gt;&gt; NFT Contract: 1) transferAll: nft_id_old, nft_id_new\n    Note left of NFT Contract: requires caller to be owner of both NFTs\n    Note left of NFT Contract: changes association of name from one NFT to another NFT\n    Note left of NFT Contract: updates expiry of transferred names to match expiry of names in nft_id_new\n    Note left of NFT Contract: burns the old NFT</code></pre> <p>Considerations</p> <ul> <li>Allow to transfer AENS names to NFTs owned by other accounts?<ul> <li>Users could define per NFT if they want to allow this</li> <li>By default this would not be allowed to prevent spamming NFTs with (unwanted) AENS names</li> </ul> </li> </ul>"},{"location":"diagrams/transfer_nfts/","title":"Transfer NFTs","text":""},{"location":"diagrams/transfer_nfts/#single","title":"Single","text":"<pre><code>sequenceDiagram\n    actor NFT owner\n    NFT owner -&gt;&gt; NFT Contract: 1) transfer: recipient, nft_id, option(data)\n    Note left of NFT Contract: default transfer entrypoint of AEX-141</code></pre>"},{"location":"diagrams/transfer_nfts/#multiple","title":"Multiple","text":"<pre><code>sequenceDiagram\n    actor Any user\n    Any user -&gt;&gt; NFT Contract: 1) transferMultiple: recipient, Set(nft_id)</code></pre>"},{"location":"diagrams/unwrap_aens_names/","title":"Unwrap AENS names","text":""},{"location":"diagrams/unwrap_aens_names/#single-name","title":"Single name","text":"<pre><code>sequenceDiagram\n    actor NFT owner\n    NFT owner -&gt;&gt; NFT Contract: 1) unwrapSingle: nft_id, name, option(recipient)\n    NFT Contract --&gt;&gt; NFT owner: 1.1) transfer name</code></pre>"},{"location":"diagrams/unwrap_aens_names/#multiple-names","title":"Multiple names","text":"<pre><code>sequenceDiagram\n    actor NFT owner\n    NFT owner -&gt;&gt; NFT Contract: 1) unwrapMultiple: nft_id, Set(names), option(recipient)\n    NFT Contract --&gt;&gt; NFT owner: 1.1) transfer names</code></pre>"},{"location":"diagrams/unwrap_aens_names/#all-names","title":"All names","text":"<pre><code>sequenceDiagram\n    actor NFT owner\n    NFT owner -&gt;&gt; NFT Contract: 1) unwrapAll: nft_id, option(recipient)\n    Note left of NFT Contract: burns the NFT\n    NFT Contract --&gt;&gt; NFT owner: 1.1) transfer names</code></pre> <p>Note:</p> <ul> <li>If no recipient is defined, the names will be returned to the owner of the NFT calling the unwrap entrypoint</li> </ul>"},{"location":"diagrams/update_pointers/","title":"Update pointers of AENS names","text":""},{"location":"diagrams/update_pointers/#add-a-single-pointer","title":"Add a single pointer","text":"<pre><code>sequenceDiagram\n    actor NFT owner\n    NFT owner -&gt;&gt; NFT Contract: 1) addPointer: nft_id, name, pointer_key, pointer_object\n    Note left of NFT Contract: keeps other existing pointers\n    Note left of NFT Contract: adds (replaces) a single pointer of the provided name</code></pre>"},{"location":"diagrams/update_pointers/#add-a-set-of-pointers","title":"Add a set of pointers","text":"<pre><code>sequenceDiagram\n    actor NFT owner\n    NFT owner -&gt;&gt; NFT Contract: 1) setPointers: nft_id, name, map(pointer_key, pointer_object), keepExisting\n    Note left of NFT Contract: keeps other existing pointers only if keepExisting=true\n    Note left of NFT Contract: sets (replaces) pointers of the provided name</code></pre>"},{"location":"diagrams/update_pointers/#remove-a-single-pointer","title":"Remove a single pointer","text":"<pre><code>sequenceDiagram\n    actor NFT owner\n    NFT owner -&gt;&gt; NFT Contract: 1) removePointer: nft_id, name, pointer_key\n    Note left of NFT Contract: keeps other existing pointers\n    Note left of NFT Contract: removes the provided pointer of the provided name</code></pre>"},{"location":"diagrams/update_pointers/#remove-multiple-pointers","title":"Remove multiple pointers","text":"<pre><code>sequenceDiagram\n    actor NFT owner\n    NFT owner -&gt;&gt; NFT Contract: 1) removePointers: nft_id, name, Set(pointer_key)\n    Note left of NFT Contract: keeps other existing pointers\n    Note left of NFT Contract: removes the provided pointers of the provided name</code></pre>"},{"location":"diagrams/update_pointers/#remove-all-pointers","title":"Remove all pointers","text":"<pre><code>sequenceDiagram\n    actor NFT owner\n    NFT owner -&gt;&gt; NFT Contract: 1) removeAllPointers: nft_id, name\n    Note left of NFT Contract: removes the provided pointer of the provided name</code></pre>"},{"location":"diagrams/wrap_aens_names/","title":"Wrap AENS names","text":""},{"location":"diagrams/wrap_aens_names/#wrap-names-by-minting-a-new-nft","title":"Wrap names by minting a new NFT","text":"<pre><code>sequenceDiagram\n    actor AENS owner\n    AENS owner -&gt;&gt; NFT Contract: 1) wrapAndMint: map(name, delegation_signature)\n    Note left of NFT Contract: claims ownership of names\n    Note left of NFT Contract: mints NFT\n    Note left of NFT Contract: assigns names to NFT\n    Note left of NFT Contract: extends all names\n    NFT Contract --&gt;&gt; AENS owner: 1.1) assign ownership of NFT</code></pre> <p>Considerations</p> <ul> <li>Delegation signature needs to be created in advance for each AENS name.<ul> <li>In the future it will be possible to give a contract permission to handle all AENS names owned by an account, see: https://github.com/aeternity/aeternity/issues/4080</li> </ul> </li> </ul>"},{"location":"diagrams/wrap_aens_names/#wrap-name-into-existing-nft","title":"Wrap name into existing NFT","text":"<pre><code>sequenceDiagram\n    actor AENS owner\n    AENS owner -&gt;&gt; NFT Contract: 1) wrapSingle: nft_id, name, delegation_signature\n    Note left of NFT Contract: claims ownership of name\n    Note left of NFT Contract: assigns name to NFT\n    Note left of NFT Contract: updates expiry of name to wrap to match expiry of names in nft_id</code></pre>"},{"location":"diagrams/wrap_aens_names/#wrap-multiple-names-into-existing-nft","title":"Wrap multiple names into existing NFT","text":"<pre><code>sequenceDiagram\n    actor AENS owner\n    AENS owner -&gt;&gt; NFT Contract: 1) wrapMultiple: nft_id, map(name, delegation_signature)\n    Note left of NFT Contract: claims ownership of names\n    Note left of NFT Contract: assigns names to NFT\n    Note left of NFT Contract: updates expiry of names to wrap to match expiry of names in nft_id</code></pre>"}]}